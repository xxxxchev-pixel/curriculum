<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Perfil - DermaCare</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 50px 0;
        }
        .card {
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h3 class="mb-0">
                            <i class="bi bi-clipboard-check"></i> Teste de Perfil
                        </h3>
                    </div>
                    <div class="card-body">
                        <div id="resultado"></div>
                        
                        <div class="mt-4">
                            <h5>Simular Usuário de Teste:</h5>
                            <button onclick="criarUsuarioTeste()" class="btn btn-primary">
                                <i class="bi bi-person-plus"></i> Criar Usuário "João Gomes"
                            </button>
                            <button onclick="limparDados()" class="btn btn-danger ms-2">
                                <i class="bi bi-trash"></i> Limpar Dados
                            </button>
                            <a href="perfil.html" class="btn btn-success ms-2">
                                <i class="bi bi-eye"></i> Ver Perfil
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="assets/js/app.js"></script>
    <script>
        function mostrarResultado() {
            const user = Auth.getUser();
            const token = Auth.getToken();
            
            let html = '<div class="alert alert-info"><h5><i class="bi bi-info-circle"></i> Dados Atuais:</h5>';
            
            if (user) {
                html += '<h6 class="mt-3">Dados do Usuário:</h6>';
                html += '<table class="table table-sm table-striped">';
                html += '<tr><th>Nome</th><td>' + (user.nome || 'N/A') + '</td></tr>';
                html += '<tr><th>Apelido</th><td>' + (user.apelido || 'N/A') + '</td></tr>';
                html += '<tr><th>Email</th><td>' + (user.email || 'N/A') + '</td></tr>';
                html += '<tr><th>NIF</th><td>' + (user.nif || 'N/A') + '</td></tr>';
                html += '<tr><th>Telefone</th><td>' + (user.telefone || 'N/A') + '</td></tr>';
                html += '<tr><th>Data Nasc.</th><td>' + (user.data_nascimento || 'N/A') + '</td></tr>';
                html += '</table>';
                
                html += '<h6 class="mt-3">JSON Completo:</h6>';
                html += '<pre>' + JSON.stringify(user, null, 2) + '</pre>';
                
                html += '<h6 class="mt-3">Token:</h6>';
                html += '<code>' + (token || 'Não existe') + '</code>';
            } else {
                html += '<p class="text-warning">Nenhum usuário logado!</p>';
            }
            
            html += '</div>';
            
            document.getElementById('resultado').innerHTML = html;
        }
        
        function criarUsuarioTeste() {
            const usuarioTeste = {
                id: 1,
                nome: 'João',
                apelido: 'Gomes',
                email: 'gomesjoao1414@gmail.com',
                nif: '123456789',
                telefone: '912345678',
                data_nascimento: '1990-05-15',
                endereco: 'Rua Exemplo, 123, 3º Esq',
                codigo_postal: '1000-001',
                cidade: 'Lisboa',
                genero: 'masculino',
                seguro: 'ADSE',
                numero_seguro: '123456'
            };
            
            Auth.setUser(usuarioTeste);
            Auth.setToken('token_1_' + Date.now());
            
            alert('✅ Usuário "João Gomes" criado!\n\nAgora clique em "Ver Perfil" para verificar se os dados aparecem corretamente.');
            
            mostrarResultado();
        }
        
        function limparDados() {
            if (confirm('Deseja limpar todos os dados?')) {
                Auth.logout();
                alert('✅ Dados limpos!');
                mostrarResultado();
            }
        }
        
        // Mostrar ao carregar
        window.addEventListener('DOMContentLoaded', mostrarResultado);
    </script>
</body>
</html>
